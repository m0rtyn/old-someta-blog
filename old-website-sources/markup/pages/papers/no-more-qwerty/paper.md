## Вступление

Я увлекся вопросом клавиатурных раскладок более двух лет назад

<!-- После экспериментов и изучения пары имеющихся решений я создал собственную раскладку. Её я считаю одной из самых удобных для тех, кому приходится печатать на русском и английском языках. -->

## TL;DR

<!-- -   Почему стоит сменить раскладку
-   История QWERTY
-   Исследования расскадок
-   Что можно попробовать кроме QWERTY
-   Возражения -->

## Причины сменить стандартные раскладки

<!-- -   высокая вероятность срыва при обучении
-   часто используемые символы вне home row
-   бегающие клавиши пунктуации
-   нужно учиться дважды (нет ассоциативной связи) -->

## Краткая история ~~времени~~ QWERTY

Но как вышло, что подавляющее большинство печатает на якобы устаревшей раскладке?

QWERTY существует больше века.

<!-- Американский инженер Шолес с коллегами создавал печатные машинки с конца 1860-х. -->

<!-- Тогда технические ограничения были суровыми:

-   слепая печать ещё не изобретена
-   рычаги клавиш задевают друг друга и заклинивают
-   напечатанный текст можно увидеть, только провернув барабан -->

<!-- Поэтому Шолес сначала сделал клавиши в алфавитном порядке, а затем перемешал все таким образом, чтобы часто повторяемые буквы находились как можно дальше друг от друга. -->

Создатели сделали как смогли, решая актуальные проблемы того времени. Подход правильный -- итеративный. Но, кажется, при таком подходе стоит чаще чем раз в столетие пересматривать полученный результат.

<!-- Сегодня QWERTY находится в суперпозиции. Она и жуткий анахронизм и признанный стандарт. -->
### Анахронизм

Это можно обьяснить влиянием рынка. QWERTY была уже настолько влиятельна, что те кто бы решил сделать клавиатуру с иными обазначениями просто бы проиграл. К тому же у англоязычного населения мира проблем минимум вдвое меньше и им норм.

Примеры отличные от стандартной клавиатуры есть, но их вне мэинстрима.

Есть надежда на клавиатуры с дисплеями способными отображать любые символы на клавишах.

Чтобы понять как так вышло нужно обратиться к истории

### «Так исторически сложилось»

<!-- -   1874, Remington No.1, первая коммерчески успешная печатная машинка, которая представила QWERTY
-   1961, IBM Selectric, влиятельная электрическая машинка
-   1985, IBM the Model M, компьютерная клавиатура ставшая каноном -->

### Л — Локализатион

Адаптировать под русский можно лучше

ЙЦУКЕН спроектировали для машинок в Америке в конце XIX века так как там находилось их производство.  Её создатели буквально натянули русский алфавит на клавиатуру разработанную под английский алфавит.

Теперь мы имеем баги вроде запятой в верхнем регистре (над Б и Ю). А также смена расположения у  точки, двоеточия, точки с запятой, кавычки, вопроса. Это путает, если вы регулярно пользуетесь обеими. А кое-что в русской раскладке и вовсе нельзя набрать, например, одинарную кавычку.

<!-- Надписи на кнопках тоже не сильно спасают. Попробуйте разобраться, что тут происходит:
![](./pictures/chaos.png) -->

Запятая в верхнем регистре есть только в ЙЦУКЕН.

## Исследования расскадок

<!-- Как понять, что раскладка лучше (или хуже)? -->

Известные мне исследования неубедительны в отношении того, действительно ли раскладки предлагают какие-либо реальные выгоды.

Некоторые исследования допускают, что для опытного наборщика текста раскладка не имеет значения.

Часто затраты на смену раскладки перевешивают преимущества дальнейшего использования нынешней раскладки.

### Исследования упускают важный факторы

<!-- -   неудобная раскладка вредна
-   высокий порог вхождения
-   коэффициент ошибок
-   можно сохранить совместимость -->

### Тунельный синдром запястья

Кто знает про тунельный синдром запястного канала?
Причиной этого заболевания является сдавление срединного нерва

-   Проявляется болью и онемением.
-   Даже диагноз средней тяжести может поставить крест на карьере программиста.
-   В группе риска женщины, сурдопереводчики, пианисты, барабаншики, художники, программисты, киберспортсмены.

### Carpalx

Я выбрал подход Мартина Кривински, канадского ученого в области биоинформатки.

Он создал математическую модель и клавиатурный оптимизатор на ее основе — Carpalx. Оптимизатор призван минимизировать усилия при печати и снижать напряжение на запястья.

CarPalx — тщательное исследование раскладок, призванное уменьшить дискомфорт при печати.

С помощью Carpalx Мартин сопоставил существующие раскладки, а также сгенерировал оптимизированные.

Будет опрометчиво утверждать, что ему удалось создать лучшую раскладку. Тем не менее она сушественно снижает требуемые усилия при печати. Это подтверждают мой личный опыт и иные сравнителные исследования.

Kлавиатура и то, как вы её используете, оказывает большее влияние на здоровье рук, чем раскладка. И все же при нынешних условиях замена раскладки не теряет смысла и даже необходима.

Вот ещё факторы, которые не учитывают в исследованиях

### Привычные горячие клавиши

Это важно так как hotkeys сформировались на основе qwerty, в ходе отбора.

Наиболее удобные паттерны наследовались и становились популярнее. И важны не столько буквы, сколько привычное положение клавиш.

Я сторонник сохранения совместимости с QWERTY-hotkeys поэтому искал решения не ломающие совместимость

### Скорость освоения слепого ввода, скорость печати и среднее количество ошибок

Сложно обьективно измерить эти показатели. Первые два в большей степени зависят от индивидуальных особенностей. Последний я считаю ключевым, на который влияет напрямую комфортность печати.

По личному опыту скажу, что на QWERTY/ЙЦУКЕН у меня были непреодолимые проблемы с рядом символов, в то время как в QGMLWB/ЯГМЛШБ я имею только сложные сочетания некоторых букв.

## Если не QWERTY, то что?

Этим вопросом задаются те, кто не знает про наличие альтернатив, а их достаточно. Вот некоторые из них.
Все раскладки сосредоточены на перетасовке клавиш на изначальной форме клавиатуры IBM PC.

### 1936 Dvorak

Август Дворак, Профессор Вашингтонского Университета, одним из первых оптимизирован набор текста для десятипальцевого слепого метода, чтобы в большинстве слов символы набирались попеременно правой и левой рукой

Привычные клавиатуры зародились на рубеже 19 и 20 веков.

Критика от Дворака:

-   обычные комбинации букв требуют движений пальцев.
-   для обычных комбинаций букв требуется, чтобы палец перепрыгнул через домашнюю строку.
-   общие комбинации букв набираются одной рукой. (например, «были»)
-   В основном печать ведется с левой стороны, что для большинства людей не является доминирующей рукой.
-   Примерно 16% ввода выполняется в нижней строке, 52% в верхней строке и только 32% в домашней строке.

### 2006 Colemak

Разработана Шаем Коулманом. Несколько лучше чем Dvorak, при этом напоминает QWERTY и содержит оставляет некоторые клавиши на прежних местах (для совместимости с hotkeys).

### Русские оптимизированные раскладки

Диктор и раскладка Зубачева
Типографская раскладка Бирмана
Мефодица
Universal-layout Никиты Прокопова

### Martynak

-   Научился слепому десятипальцевому вводу и действительно слепому вводу
-   Достиг ~250 слов в минуту на обоих языках
-   Понизил коэффициент ошибок с ~5%/~10% до &lt;2%
-   НЕПРИКОСНОВЕННОСТЬ ЛИЧНОЙ КЛАВИАТУРЫ

### Английская — модернизированная QGMLWB

Английский язый является основым.

Раскладка заимствована у Carpalx.

Поставил переключение языка на одну клавишу.

Добавил слой с qwerty для совместимости с горячими клавишами (при нажатии на функциональные клавиши).

Эксперименты продолжаются

### Русская — фонетическая QGMLWB

Фонетическая означает транслит английских букв на русский

Меньшим из зол стала руская фонетическая раскладка ЯГМЛШБ.

Невлезающие буквы повесил на ассоциативно близкие с зажатым ALT/OPTION. Например у-ю, о-ё, е-э и так далее. Они редкие и поэтому это лучше чем сдвигать пунктуацию.

<!-- ### Как установить?

1.  Скачайте [дистрибутив (последняя версия 2.6)](https://github.com/tonsky/Universal-Layout/releases/download/1.$/UniversalLayout_1.$.zip).
2.  Кидаете `Universal.bundle` в `/Library/Keyboard Layouts`.
3.  `System Preferences...` → `Keyboard` → `Input sources` → добавляете «English - Universal» и «Russian - Universal».
4.  Чтобы удалить оригинальную английскую раскладку, добавляете японскую, затем удаляете английскую, затем удаляете японскую.
5.  Возможно, понадобится сделать Logout-Login. -->

### Дополнительные удобные модификации

-   переключение языка на одну клавишу (напр. caps lock)
-   переключение регистра на зажатый пробел
-   backspace на Capslock + H
-   «стрелочки» на Capslock + IJKL
-   смена порядка функциональных клавиш: cmd, fn, ctrl, option (для Mac)

## Возражения

### — Не понимаю, зачем это мне?

Набирать частотные символы без шифта или переключения в другую раскладку очень сильно разгружает руки, приносит приятное чувство комфорта, увеличивает скорость набора и снижает количество ошибок. Если вы связали свою жизнь с компьютерами, имеет смысл вложиться в оптимально спроектированный инструмент и правильные привычки, которые окупят себя десятикратно.

### — Я попробовал и это очень неудобно!

Так просто начать пользоваться новой раскладкой (любой), как и новой клавиатурой, не получится. Как человек, уже переучивший себя на пару нестандартных клавиатур и периодически экспериментирующий над собственными раскладками, хочу сказать — первым ощущениям нельзя верить. Неудобно только первую неделю, можно и перетерпеть, зато потом начинается кайф.

Также стоит понять, что после опыта изучения QWERTY/ЙЦУКЕН формируется когнитивное искажение о том, что всякий последующий опыт изучения новой раскадки будет подобен первому (весьма травмирующему). Так выходит из-за действительно высокого порога входа.

### — Надписи на кнопках теперь все перепутаны!

Да, но с этим можно жить. Люди без особых проблем набирают русский текст на английских клавиатурах и на клавиатурах вообще без подписей. Учитесь не смотреть на клавиатуру и всё получится. Слепой ввод это двойной кайф: моментальная обратная связь на экране и образ ~~кул~~хакера в глазах окружающих.

### — Я не смогу работать на других компьютерах!

Я работаю за нестандартными клавиатурами и раскладками с 2017 года. Когда мне приходилось часто переключаться, я мог одинаково свободно работать за любыми раскладами. Когда я стал работать преимущественно за одним компьютером и одной раскладкой, этот навык потерялся, но как показала практика, проблема сильно преувеличена — работать за чужими компьютерами приходится не так уж и часто. К тому же всегда можно положиться на зрячий ввод с помощью обозначений на клавишах.

### — Всё нравится, но я хочу самостоятельно поэкспериментировать с этим.

Скачайте мою раскладку или раскадку Никиты. Откройте в [Ukelele.app](http://scripts.sil.org/ukelele) и доведите до нужного состояния. Сделать это очень просто на Mac, чуть сложнее на Windows и проблематично на прочих Linux.

### — Я переживаю за Ё! (Ь, Ъ, Ю, Э, Щ)

Они никуда не делись, просто переехали в типографский слой (Alt + ...) как [низкочастотные буквы](https://ru.wikipedia.org/wiki/%D0%A7%D0%B0%D1%81%D1%82%D0%BE%D1%82%D0%BD%D0%BE%D1%81%D1%82%D1%8C).

### Учить новую раскладку сложно

Нет, так может казаться из-за прошлого опыта изучения печати на QWERTY. Происходит когнитивное искажение: если тогда было сложно, то и всегда будет сложно. Я отличаюсь лишь тем, что не смог согласиться, что обучения QWERTY/ЙЦУКЕН должно быть таким неприятным.

## Заключение

Иногда стоит подвергать сомнению привычные вещи.

Изучение раскладок предполагает физическое устройство клавиатуры.

Проще создать программу для вычисления различных частот и расстояний между клавишами, как и создать собственную раскладку. Труднее придумать и распространить новую клавиатуру.

Я выбрал путь наименьшего сопротивления и решил актуальную задачу.

Полнoценным решением будет исследование обшей эргономичности клавиатуры и ее переработка. Такие исследования есть.

## Материалы

<https://tonsky.livejournal.com/321097.html>
<https://tonsky.livejournal.com/318571.html>
<https://tonsky.livejournal.com/318789.html>

## Made with

&lt;///img src="pictures/logo.png" width="250" alt="Shower logo">

Follow [@shower_me](https://twitter.com/shower_me) for support and updates, [file an issue](https://github.com/shower/shower/issues/new) if you have any.
